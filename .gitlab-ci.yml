image: node:lts
stages:
  - lint
  - test
  - deploy
  - build

cache: &global_cache
  key: $CI_COMMIT_REF_SLUG
  paths:
    - server/node_modules/
  policy: pull-push

lint:
  stage: lint
  script:
    - echo 'LINT'
    - cd server/
    - npm install --include=dev
    - npm run lint

build:
  stage: build
  script:
    - echo 'BUILD'
    - cd server/
    - npm install --include=dev
    - npm run build
